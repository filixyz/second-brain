The internet protocol stack consists of five layers;
* Physical
* Link
* Network
* Transport
* Application
This book takes a Top down approach in discussing them.

![Internet-Stack](imgs/Internet-Stack.png)

###  Application Layer
The application layer is where network applications and their application Layer protocols reside. There are numerous application protocols like HTTP, SMTP, FTP, DNS and such.

An application layer protocol is distributed in numerous end systems, with the end system using the protocol of that application in one end system to exchange packets of information with the application in another end system.

### Transport Layer
The transport layer transports application layer messages between endpoints of an application. There are two transport protocols that the internet provide; TCP and UDP.

TCP provides a connection-oriented experience to it’s applications. This service includes a guarantee of the delivery of application layer messages with flow control.

TCP also breaks down longs messages into sizable segments and also provides congestion control, so that a source throttles its transmission rate in cases of congestion.

UDP  sounds like its opposite; its is connection-less and comes with no guarantee.

Transport layer packets are also known as **Segments**.

### Network Layer
The Network layer is responsible for moving network layer packets known as a **datagram** from one host to another. 

What happens is that the transport layer passes onto the Network layer a segment and a destination address to the network layer, the network layer uses these to construct a datagram, and handles the delivery of the segment to the transport layer of the destinations host.

The internet Network layer includes the IP protocol, which determines the fields of the datagram and defines how end systems act on these fields.

The network layer also includes routing protocols which determine the routes the datagram takes while traversing from it’s source to it’s destination. A network layer includes numerous types of routing protocols

### Link Layer
As the Network layers route a datagram through a series of routers between it’s source and destination agreeing that each routes be referred to as a node, The link layer is responsible for conveying that datagram to the network layer of the nodes in between the route.

The Network layer specifies that **“where it’s going”** of a datagram and **“what to be done”** by the target node, But does not specify the **“how it get’s there”’**.

**“How it get’s there”** is handles by the link layer. 

Examples of link layer protocols are; Ethernet, WiFi and cables access network DOCSIS protocol. 

link layer packets are **Frames**.

### Physical Layer
The Job if the link layer is to move entire frames from one network element to and adjacent network element, Its job its to move individual bits within a frame from one node to the next, protocols include, fiber optics, coaxial wire etc.


### Analogy to understand each layer
* Application Layer protocol answers: 
	 **“I have this type of message, How do i go about sending it?”**
* Transport Layer protocol answers:
	 **“In what way would i send it, do i send it piece by piece, do i care about the time of arrival?, what is it’s send format?”** and such.
*  Network Layer protocols answer:
	  **“How can i specify where my message is going to? what routes should it take?  and what should be done with it?”**
* Link Layer protocol specify: 
	 **“ OK i have figured the route. How do i actualize this send, by mailman, message pigeons?”**
* Physical Layer protocols specify:
	 **“Would the message teleport or travel by some land transport or some water-based form of transport”**

This is an analogy i came up with that explains OSI model, that i like to think mimics how some snobby kid from some aristocratic family in the Victorian era that booked an inn, spoke to the concierge while addressing how a letter should be sent by one of his slaves:

“ I want to send a message, a message in text format, I think i’ll write a letter **(Application layer)**.

This letter is really long so i’ll write it parcel by parcel. If for some reason a parcel gets missing, my sender must ensure my recipient get’s that parcel, no matter the cost. I demand integrity **(Transport Layer)**.

To whom will I be sending this letter to? that will be my Father, Let me provide his address. My sender should traverse the routes that leads to that address, obviously, and… one more thing, the letter should be opened on his birthday, please state that to the slave. **(Network Layer)**.

I want a healthy serf with a reputation of fidelity in completing his tasks, be it man,  woman or child **(Link layer)**.

I wonder if he’ll run, walk or fly, ha-ha wouldn’t it be funny if the slave could secretly fly and has been keeping it from us? Then we’ll have to stake him at town square and burn his flesh to cinders. 
Anyways he should not use my carriages. **(Physical Layer)**

## 1.5.2 Encapsulation
The application layer message along with that transport layer header information comprise the **transport-layer segment**. The transport later thus **encapsulates** the application layer message.
Error detection bits in the segment, which are are defined in the transport headers, allow the transport layer of receiving ends error check if that messages had been altered enroute, The transport layer then passes the segment to the network layer, which also adds its won network headers comprising of source and destination addresses, forming a **network layer datagram**, The network layer then passes the datagram to the link layer which adds it’s own additional headers creating a **link layer frame**.

We see that at each layer, a packet has two types of fields; header fields and a **payload** field. A payload is typically a packet from the layer above.

Encapsulation is the process in which layers attach their header information to packets they receive from layers above them in the Internet Network Infrastructure.


